<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="noindex, nofollow" />
    <title>PDF Generation - Invoice</title>
    <meta property="og:title" content="PDF Generation - Invoice" />
    <meta name="keywords" content="demo, pdf generation, invoice" />
    <link href="/css/output.css" rel="stylesheet" />

    <script id="__EDGEE_SDK__" async src="https://demo.edgee.app/_edgee/sdk.js"></script>
  </head>

  <body class="min-h-screen bg-background font-sans antialiased">
    <nav class="bg-gray-800">
      <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <div class="flex h-16 items-center justify-between">
          <div class="flex items-center">
            <div class="flex-shrink-0">
              <a href="/">
                <svg width="30" height="30" viewBox="0 0 512 512" fill="#FFFFFF">
                  <path
                    d="M250.89 62.0864C253.362 56.5582 258.844 53 264.891 53H418.643C429.762 53 437.187 64.4799 432.643 74.6453L413.509 117.45C411.038 122.978 405.555 126.537 399.509 126.537H245.757C234.638 126.537 227.212 115.057 231.756 104.891L250.89 62.0864Z"
                  />
                  <path
                    d="M97.4909 228.916C99.962 223.387 105.445 219.829 111.491 219.829H297.019C308.138 219.829 315.563 231.309 311.019 241.475L291.885 284.279C289.414 289.808 283.931 293.366 277.885 293.366H92.3574C81.2382 293.366 73.8128 281.886 78.3568 271.721L97.4909 228.916Z"
                  />
                  <path
                    d="M97.4909 393.55C99.962 388.022 105.445 384.463 111.491 384.463H367.144C378.263 384.463 385.689 395.943 381.145 406.109L362.011 448.914C359.54 454.442 354.057 458 348.01 458H92.3574C81.2382 458 73.8128 446.52 78.3568 436.355L97.4909 393.55Z"
                  />
                </svg>
              </a>
            </div>
            <div class="ml-6 block">
              <div id="nav" class="flex space-x-4">
                <a href="/pdf-generation.html" class="rounded-md px-3 py-2 text-sm font-medium text-gray-300 hover:bg-gray-700 hover:text-white"
                  >PDF Generation</a
                >
              </div>
              <script>
                document.addEventListener("DOMContentLoaded", function () {
                  var currentUrl = window.location.pathname;
                  if (currentUrl === "/index.html") {
                    currentUrl = "/";
                  }
                  var links = document.querySelectorAll("#nav a");
                  links.forEach(function (link) {
                    if (link.getAttribute("href") === currentUrl) {
                      link.classList.add("bg-gray-900");
                    }
                  });
                });
              </script>
            </div>
          </div>
          <div class="flex items-center">
            <div class="flex items-center">
              <a href="https://github.com/edgee-cloud/demo-html" target="_blank" class="text-sm font-medium text-gray-300 hover:text-white">
                <svg width="24" height="24" viewBox="0 0 1024 1024" fill="none">
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z"
                    transform="scale(64)"
                    fill="#CCCCCC"
                  />
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <div class="bg-white py-8 sm:py-10">
      <div class="mx-auto max-w-4xl px-6 lg:px-8">
        <!-- Invoice Header -->
        <div class="mb-8">
          <div class="flex justify-between items-start mb-8">
            <div>
              <img
                src="https://avatars.githubusercontent.com/u/127485680?s=200&v=4"
                alt="Company Logo"
                class="h-12 mb-4"
                onerror="this.style.display='none'"
              />
              <h1 class="text-3xl font-bold text-gray-900">INVOICE</h1>
              <p class="text-lg text-gray-600">INV-2024-001234</p>
            </div>
            <div class="text-right">
              <p class="text-sm text-gray-600">Due Date</p>
              <p class="text-lg font-semibold text-gray-900">2025-07-30</p>
            </div>
          </div>
        </div>

        <!-- Company and Customer Information -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
          <!-- From -->
          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-3">From:</h3>
            <div class="text-gray-600">
              <p class="font-medium text-gray-900">Edgee</p>
              <p>40 Avenue du Network Layer</p>
              <p class="mt-2">Phone: +1 (111) 494 9494</p>
              <p>Email: support@edgee.cloud</p>
            </div>
          </div>

          <!-- To -->
          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-3">To:</h3>
            <div class="text-gray-600">
              <p class="font-medium text-gray-900">Demo Viewer</p>
            </div>
          </div>
        </div>

        <!-- Invoice Items -->
        <div class="mb-8">
          <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
            <table class="min-w-full divide-y divide-gray-300">
              <thead class="bg-gray-50">
                <tr>
                  <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Item</th>
                  <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Quantity</th>
                  <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Unit Price</th>
                  <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Web Hosting Services - Basic Plan</td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">3</td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">$25.00</td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium">$75.00</td>
                </tr>
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Monthly SEO Consultation</td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">1</td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">$150.00</td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium">$150.00</td>
                </tr>
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Domain Registration (2 years)</td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">1</td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">$20.00</td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium">$20.00</td>
                </tr>
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Cloud Storage Expansion (100GB)</td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2</td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">$10.00</td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium">$20.00</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Total and Payment Information -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
          <!-- Payment Information -->
          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-3">Payment Information:</h3>
            <div class="text-gray-600">
              <p><span class="font-medium">Bank:</span> Edgee Bank</p>
              <p><span class="font-medium">Account Name:</span> The Edge</p>
            </div>
          </div>

          <!-- Total -->
          <div>
            <div class="bg-gray-50 p-6 rounded-lg">
              <div class="flex justify-between items-center">
                <span class="text-xl font-semibold text-gray-900">Total:</span>
                <span class="text-2xl font-bold text-gray-900">$265.00</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Download Button -->
        <div class="text-center">
          <button
            id="downloadBtn"
            class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 px-8 rounded-lg shadow-lg transition duration-200 ease-in-out transform hover:scale-105"
          >
            <svg class="inline-block w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
              ></path>
            </svg>
            Download Invoice PDF
          </button>
        </div>
      </div>
    </div>

    <script>
      document.getElementById("downloadBtn").addEventListener("click", async function () {
        const button = this;
        const originalContent = button.innerHTML;

        // Set loading state
        button.disabled = true;
        button.classList.add("opacity-75", "cursor-not-allowed");
        button.innerHTML = `
          <svg class="inline-block w-5 h-5 mr-2 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
          </svg>
          Generating PDF...
        `;

        try {
          // Track the download attempt with Edgee
          if (typeof edgee !== "undefined") {
            edgee.track({
              name: "invoice_download_clicked",
              properties: {
                invoice_number: "INV-2024-001234",
                total_amount: "$265.00",
                customer: "Demo Viewer",
              },
            });
          }
          const response = await fetch("/generate-invoice-pdf", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              logo_src: "https://avatars.githubusercontent.com/u/127485680?s=200&v=4",
              invoice_number: "INV-2024-001234",
              due_date: "2025-07-30",
              company_name: "Edgee",
              company_address: "40 Avenue du Network Layer",
              company_phone: "+1 (111) 494 9494",
              company_email: "support@edgee.cloud",
              customer_name: "Demo Viewer",
              items: [
                {
                  item: "Web Hosting Services - Basic Plan",
                  quantity: "3",
                  unit_price: "$25.00",
                  amount: "$75.00",
                },
                {
                  item: "Monthly SEO Consultation",
                  quantity: "1",
                  unit_price: "$150.00",
                  amount: "$150.00",
                },
                {
                  item: "Domain Registration (2 years)",
                  quantity: "1",
                  unit_price: "$20.00",
                  amount: "$20.00",
                },
                {
                  item: "Cloud Storage Expansion (100GB)",
                  quantity: "2",
                  unit_price: "$10.00",
                  amount: "$20.00",
                },
              ],
              total_value: "$265.00",
              bank_name: "Edgee Bank",
              account_name: "The Edge",
            }),
          });

          if (response.ok) {
            const data = await response.json();
            const a = document.createElement("a");
            a.href = data.signedUrl;
            a.download = "invoice-INV-2024-001234.pdf";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
          } else {
            throw new Error("Failed to generate PDF");
          }
        } catch (error) {
          console.error("Error generating PDF:", error);
          alert("PDF generation is not yet implemented. This is a demo placeholder.");
        } finally {
          // Reset button state
          button.disabled = false;
          button.classList.remove("opacity-75", "cursor-not-allowed");
          button.innerHTML = originalContent;
        }
      });
    </script>
  </body>
</html>
